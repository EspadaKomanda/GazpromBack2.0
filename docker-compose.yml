services:
  image-agregation-service:
    build: ImageAgregationService
    ports:
      - 5072:5072
    environment:
      - REDIS_CONNECTION_STRING=83.166.239.45:6379
      - REDIS_INSTANCE_NAME=image-agregation
      - KAFKA_BROKERS=90.156.218.15:29092
      - KAFKA_GROUP_ID=image-agregation
      - S3_URL=83.166.237.29:9000
      - DB_HOSTNAME=83.166.239.45
      - DB_PORT=5432
      - DB_USERNAME=postgres
      - DB_PASSWORD=QWERTYUIO2313
      - DB_NAME=imageagregationdb
      - IMAGERESP_TOPIC=imageResponseTopic
      - IMAGEREQ_TOPIC=imageRequestTopic
      - IMAGEPROCESSOR_URL=
      - IMAGEGENERATOR_URL=http://45.89.189.124:5051
    restart: unless-stopped
  api-gateway-service:
    build: ApiGatewayService
    ports:
      - 5071:5071
    restart: unless-stopped
  auth-service:
    build: AuthService
    environment:
      - DB_HOSTNAME=83.166.239.45
      - DB_PORT=5432
      - DB_USERNAME=postgres
      - DB_PASSWORD=QWERTYUIO2313
      - DB_NAME=authdb
      - KAFKA_BROKERS=90.156.218.15:29092
      - KAFKA_GROUP_ID=image-agregation
      - AUTHRESP_TOPIC=authResponsesTopic
      - AUTHREQ_TOPIC=authRequestsTopic
    ports:
      - 5095:5095
    restart: unless-stopped
  dialog-service:
    build: DialogService
    environment:
      - DB_HOSTNAME=83.166.239.45
      - DB_PORT=5432
      - DB_USERNAME=postgres
      - DB_PASSWORD=QWERTYUIO2313
      - DB_NAME=dialogdb
      - KAFKA_BROKERS=90.156.218.15:29092
      - KAFKA_GROUP_ID=image-agregation
      - DIALOGRESP_TOPIC=dialogsResponsesTopic
      - DIALOGREQ_TOPIC=dialogsRequestsTopic
    ports:
      - 5099:5099
    restart: unless-stopped
  user-service:
    build: UserService
    environment:
      - DB_HOSTNAME=83.166.239.45
      - DB_PORT=5432
      - DB_USERNAME=postgres
      - DB_PASSWORD=QWERTYUIO2313
      - DB_NAME=userdb
      - KAFKA_BROKERS=90.156.218.15:29092
      - KAFKA_GROUP_ID=image-agregation
      - ACCOUNTRESP_TOPIC=accountResponsesTopic
      - ACCOUNTREQ_TOPIC=accountRequestsTopic
      - SMTP_FROM=
      - SMTP_SERVER=
      - SMTP_PORT=
      - SMTP_USERNAME=
      - SMTP_PASSWORD=
    ports:
      - 5090:5090
    restart: unless-stopped